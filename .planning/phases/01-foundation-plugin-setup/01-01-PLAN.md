---
phase: 01-foundation-plugin-setup
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - .claude-plugin/plugin.json
  - package.json
  - protocols/confidence-tiers.md
  - templates/PROBLEM.md
  - templates/NOTATION.md
  - templates/STATE.md
  - templates/config.json
autonomous: true

must_haves:
  truths:
    - "Plugin manifest declares name 'math' so all commands auto-namespace as /math:*"
    - "Confidence tier protocol defines VERIFIED [V], SUGGESTED [S], SPECULATIVE [~] with clear criteria, manual override syntax [V*]/[S*]/[~*], and active warning format"
    - "Document templates provide complete YAML frontmatter schemas that downstream agents can parse for routing without understanding mathematical content"
  artifacts:
    - path: ".claude-plugin/plugin.json"
      provides: "Plugin identity and namespace registration"
      contains: "\"name\": \"math\""
    - path: "protocols/confidence-tiers.md"
      provides: "Shared confidence tier protocol for all agents"
      contains: "VERIFIED"
    - path: "templates/PROBLEM.md"
      provides: "Problem document schema with YAML frontmatter"
      contains: "status:"
    - path: "templates/NOTATION.md"
      provides: "Notation profile template with symbol conventions, packages, style sections"
      contains: "Symbol Conventions"
    - path: "templates/STATE.md"
      provides: "Minimal research state template"
      contains: "current_state:"
    - path: "templates/config.json"
      provides: "Default project configuration"
  key_links:
    - from: "templates/PROBLEM.md"
      to: "templates/NOTATION.md"
      via: "notation_profile field in frontmatter references active NOTATION.md"
      pattern: "notation_profile:"
    - from: "protocols/confidence-tiers.md"
      to: "future agents"
      via: "@-reference in agent definitions"
      pattern: "VERIFIED.*SUGGESTED.*SPECULATIVE"
---

<objective>
Create the plugin skeleton (manifest, package metadata) and the foundational shared documents: the confidence tier protocol that all future agents will reference, and the document templates (PROBLEM.md, NOTATION.md, STATE.md, config.json) that define the schema for all .math/ project artifacts.

Purpose: Establish the plugin identity (namespace "math" for /math:* commands) and the document architecture that every subsequent plan and phase depends on. Without these, nothing can be built.
Output: Plugin manifest, confidence tier protocol, four document templates.
</objective>

<execution_context>
@/Users/matteo/.claude/get-shit-done/workflows/execute-plan.md
@/Users/matteo/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-plugin-setup/01-CONTEXT.md
@.planning/phases/01-foundation-plugin-setup/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create plugin manifest and update package.json</name>
  <files>
    .claude-plugin/plugin.json
    package.json
  </files>
  <action>
    Create `.claude-plugin/plugin.json` with the following exact structure:

    ```json
    {
      "name": "math",
      "version": "0.1.0",
      "description": "AI-powered mathematical research assistant: literature search, proof collaboration, computation, and LaTeX output",
      "author": {
        "name": "get-shit-done-math"
      },
      "homepage": "https://github.com/glittercowboy/get-shit-done-math",
      "repository": "https://github.com/glittercowboy/get-shit-done-math",
      "license": "MIT",
      "keywords": ["math", "research", "proof", "latex", "claude-code"]
    }
    ```

    The `"name": "math"` field is CRITICAL -- this is what makes Claude Code auto-namespace all commands in `commands/` as `/math:*`.

    Update `package.json`:
    - Change `"name"` from `"get-shit-done-cc"` to `"get-shit-done-math"`
    - Change `"version"` to `"0.1.0"`
    - Change `"description"` to `"AI-powered mathematical research assistant plugin for Claude Code"`
    - Update `"bin"` key from `"get-shit-done-cc"` to `"get-shit-done-math"`
    - Update `"repository"` url to point to `get-shit-done-math`
    - Update `"homepage"` to `https://github.com/glittercowboy/get-shit-done-math`
    - Add `"commands"`, `"agents"`, `"protocols"`, `"presets"`, `"templates"` to the `"files"` array
    - Keep `"engines"`, `"dependencies"`, `"devDependencies"` as-is
    - Update `"keywords"` to `["math", "research", "proof", "latex", "claude-code", "ai"]`

    Do NOT remove the existing `commands/gsd/` directory -- the GSD commands still exist as reference. The new math commands go in `commands/` at root level (not nested in a subdirectory) since the plugin system auto-namespaces from plugin.json `name` field.
  </action>
  <verify>
    1. Read `.claude-plugin/plugin.json` and confirm `"name": "math"` exists
    2. Read `package.json` and confirm `"name": "get-shit-done-math"` and `"version": "0.1.0"`
    3. Verify both are valid JSON (no syntax errors)
  </verify>
  <done>
    Plugin manifest exists at `.claude-plugin/plugin.json` with name "math". Package.json updated with correct math plugin identity. Both files are valid JSON.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create confidence tier protocol</name>
  <files>
    protocols/confidence-tiers.md
  </files>
  <action>
    Create `protocols/confidence-tiers.md` as the shared protocol document that ALL future agents will load via @-reference. This is architectural -- it defines the confidence system for the entire plugin.

    The protocol must include these sections (per user's locked decisions):

    **Tier Definitions** with three tiers:
    - VERIFIED [V]: Cited from published literature (known theorem, published result). Requirements: paper/textbook citation, theorem/lemma number, exact statement. Example format: `[V] By the Hahn-Banach theorem (Rudin, Functional Analysis, Thm 3.3), ...`
    - SUGGESTED [S]: Derived by the system with explicit justification from verified premises. Requirements: cite which verified facts are used, show deduction chain. Example format: `[S] From [V] Theorem 3.3 and [V] Lemma 2.1, it follows by direct substitution that...`
    - SPECULATIVE [~]: System conjecture, heuristic reasoning, creative leap, or analogy. Requirements: state why speculative, what would verify it. Example format: `[~] The pattern suggests this extends to the infinite-dimensional case, though no proof is known. Verification: check against counterexample families in [Chen 2020].`

    **Active Warnings** section:
    - When presenting content with speculative steps, count them and display warning at top
    - Format: "This [proof/analysis] contains N speculative step(s) that need verification."
    - List which steps are speculative with brief reason

    **Manual Override** section:
    - Users can promote/demote tiers
    - Overridden markers: `[V*]`, `[S*]`, `[~*]` (asterisk indicates manual override)
    - Note format: "Tier manually set by user (original: [tier])"

    **Usage in Agent Output** section:
    - Inline markers: Place `[V]`, `[S]`, or `[~]` at the start of each claim/step
    - Summary block: At top of any proof/analysis, show tier counts: "Confidence: X verified, Y suggested, Z speculative"
    - Warning threshold: Any proof with speculative steps gets the active warning

    **Notation Conflict Interaction** section:
    - When a cited source uses different notation than the user's profile, append a notation conflict flag: `[V][NC]` means "verified but notation was translated"
    - NC details go in the Notation Conflicts Log in NOTATION.md

    Use plain text markers [V], [S], [~] (not emoji, not color codes) per research recommendation -- these are universally readable, greppable, and survive copy-paste.
  </action>
  <verify>
    1. Read `protocols/confidence-tiers.md` and confirm all three tiers are defined with [V], [S], [~] markers
    2. Confirm Active Warnings section exists with the warning format
    3. Confirm Manual Override section exists with [V*], [S*], [~*] syntax
    4. Confirm Usage in Agent Output section exists
    5. Grep for "VERIFIED", "SUGGESTED", "SPECULATIVE" -- all three must appear
  </verify>
  <done>
    Confidence tier protocol document exists with complete tier definitions (VERIFIED/SUGGESTED/SPECULATIVE), active warning format, manual override syntax, agent usage instructions, and notation conflict interaction. All future agents can load this via @-reference.
  </done>
</task>

<task type="auto">
  <name>Task 3: Create document templates for .math/ project artifacts</name>
  <files>
    templates/PROBLEM.md
    templates/NOTATION.md
    templates/STATE.md
    templates/config.json
  </files>
  <action>
    Create four document template files in `templates/`. These define the schema for all project-level artifacts that `/math:init` will create in `.math/`.

    **templates/PROBLEM.md** -- Problem definition template with YAML frontmatter:
    ```yaml
    ---
    status: draft
    domain: ""
    subdomain: ""
    type: ""
    output_type: ""
    tags: []
    created: ""
    last_modified: ""
    notation_profile: ""
    ---
    ```
    Followed by markdown sections:
    - `# Problem Statement` (placeholder: "No problem submitted yet. Run /math:problem to begin.")
    - `## Mathematical Domain` (empty)
    - `## Desired Output` (empty)
    - `## Known Results` (empty, with instruction "List known theorems, lemmas, or results relevant to this problem")
    - `## Notation Preferences` (text: "See .math/NOTATION.md")
    - `## References` (empty, with instruction "List papers, textbooks, or other sources")

    The `status` field values are: `draft` (template), `defined` (user submitted problem), `in-progress` (agents working), `completed`.
    The `type` field values are: `proof`, `computation`, `exploration`, `conjecture-testing`.
    The `output_type` field values are: `formal-proof`, `research-notes`, `computation-report`, `paper-draft`.

    **templates/NOTATION.md** -- Notation profile template:
    ```yaml
    ---
    domain: ""
    based_on_preset: ""
    modified: false
    last_modified: ""
    ---
    ```
    Followed by sections:
    - `# Notation Profile`
    - `## Symbol Conventions` -- Table with columns: Concept | Notation | LaTeX | Notes (empty rows, with instruction)
    - `## LaTeX Packages` -- Default: `amsmath, amssymb, amsthm` (always loaded). Placeholder for additional packages.
    - `## Presentation Style` -- Subsections for: Theorem numbering, Proof structure, Equation numbering, Bibliography style. Each with a placeholder.
    - `## Notation Conflicts Log` -- Table with columns: Source Notation | Our Notation | Context (empty, per user's locked decision on flag + translate)

    **templates/STATE.md** -- Minimal research state (Phase 1 version):
    ```yaml
    ---
    current_state: INITIALIZED
    problem_defined: false
    notation_configured: false
    session_count: 0
    ---
    ```
    Followed by:
    - `# Research State`
    - `## Current Status` -- Text: "Project initialized. No problem submitted yet."
    - `## Available Commands` -- List the 5 active Phase 1 commands
    - `## History` -- Table: Timestamp | Event | Details (empty)

    **templates/config.json** -- Default project config:
    ```json
    {
      "version": "0.1.0",
      "domain": "",
      "notation_preset": "",
      "created": "",
      "plugin_version": "0.1.0"
    }
    ```

    All templates use placeholders that the /math:init and /math:problem commands will fill in. Do NOT hardcode specific mathematical content -- these are schemas.
  </action>
  <verify>
    1. Read each template file and confirm valid YAML frontmatter (delimited by ---)
    2. Confirm PROBLEM.md has all 6 sections (Problem Statement, Mathematical Domain, Desired Output, Known Results, Notation Preferences, References)
    3. Confirm NOTATION.md has Symbol Conventions table, LaTeX Packages, Presentation Style, and Notation Conflicts Log sections
    4. Confirm STATE.md has current_state: INITIALIZED in frontmatter
    5. Confirm config.json is valid JSON
  </verify>
  <done>
    Four document templates exist defining the complete schema for .math/ project artifacts. Each has YAML frontmatter that downstream agents can parse for routing. PROBLEM.md covers all user-facing fields (problem statement, domain, output type, known results, references). NOTATION.md covers the full style guide (symbols, packages, presentation, conflict log). STATE.md tracks minimal Phase 1 state. config.json stores project metadata.
  </done>
</task>

</tasks>

<verification>
1. `.claude-plugin/plugin.json` exists with `"name": "math"`
2. `package.json` has updated identity for get-shit-done-math
3. `protocols/confidence-tiers.md` defines all three tiers with plain text markers
4. All four templates exist with valid YAML frontmatter and expected sections
5. No external dependencies introduced
</verification>

<success_criteria>
- Plugin is identifiable as "math" namespace
- Confidence tier protocol is complete and referenceable by future agents
- Document templates define the full schema for .math/ project artifacts
- All files are pure markdown/JSON with no code dependencies
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-plugin-setup/01-01-SUMMARY.md`
</output>
