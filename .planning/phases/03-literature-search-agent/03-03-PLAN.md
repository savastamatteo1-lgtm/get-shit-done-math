---
phase: 03-literature-search-agent
plan: 03
type: execute
wave: 2
depends_on: ["03-01"]
files_modified:
  - commands/help.md
  - commands/status.md
  - commands/init.md
autonomous: true

must_haves:
  truths:
    - "/math:help shows /math:search as an active command (not 'coming soon')"
    - "/math:status displays literature state from LITERATURE.md when it exists"
    - "/math:init creates an empty LITERATURE.md from the template when setting up a new problem"
  artifacts:
    - path: "commands/help.md"
      provides: "Updated command reference with /math:search marked as active"
      contains: "search"
    - path: "commands/status.md"
      provides: "Updated status display including literature results summary"
      contains: "LITERATURE"
    - path: "commands/init.md"
      provides: "Updated init to create LITERATURE.md alongside other problem files"
      contains: "LITERATURE"
  key_links:
    - from: "commands/status.md"
      to: "templates/LITERATURE.md"
      via: "reads LITERATURE.md frontmatter for paper counts and last search date"
      pattern: "LITERATURE.md"
    - from: "commands/init.md"
      to: "templates/LITERATURE.md"
      via: "creates LITERATURE.md from template during problem setup"
      pattern: "templates/LITERATURE.md"
---

<objective>
Update existing commands to integrate the new literature search functionality into the plugin's user-facing surfaces.

Purpose: Without these updates, the user would not know /math:search is available (help still shows "coming soon"), would not see literature results in their status dashboard, and would not get a LITERATURE.md created during init. These are the wiring updates that make the literature search agent a first-class part of the plugin.

Output: Updated `commands/help.md`, `commands/status.md`, and `commands/init.md`
</objective>

<execution_context>
@/Users/matteo/.claude/get-shit-done/workflows/execute-plan.md
@/Users/matteo/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-literature-search-agent/03-01-SUMMARY.md

@commands/help.md
@commands/status.md
@commands/init.md
@templates/LITERATURE.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update /math:help and /math:status for literature integration</name>
  <files>commands/help.md, commands/status.md</files>
  <action>
**Part A: Update `commands/help.md`**

Read the current `commands/help.md`. Find the entry for `/math:search` which is currently listed as "coming soon" (Phase 3). Update it to be an active command:

- Move `/math:search` from the "coming soon" / future section to the active commands section
- Update its description to: "Search arXiv and Semantic Scholar for papers relevant to your problem, with verified references and synthesis"
- Update usage: `/math:search` for broad search, `/math:search "query"` for focused search
- If the help file uses status indicators (like checkmarks for active vs coming soon), update /math:search to show as active
- Keep all other commands in their current state (/math:prove, /math:compute, /math:write, /math:orchestrate remain as "coming soon")

**Part B: Update `commands/status.md`**

Read the current `commands/status.md`. Add a literature section to the status display that reads from LITERATURE.md when it exists.

Add to the status display logic:
1. After displaying the current problem info, check if `.math/problems/{current_problem}/LITERATURE.md` exists
2. If it exists, read its frontmatter and display:
   ```
   **Literature:**
   - Papers found: {total_papers} ({confirmed_count} confirmed, {unconfirmed_count} unconfirmed)
   - Last search: {last_search}
   - Sources: {sources_queried joined with ", "}
   ```
3. If LITERATURE.md does not exist, display:
   ```
   **Literature:** No searches yet. Run `/math:search` to find relevant papers.
   ```

Place this literature section in a logical position -- after the problem info and before or after the journal summary, depending on the current status command structure.
  </action>
  <verify>
Read `commands/help.md` and confirm:
1. /math:search is listed as an active command, not "coming soon"
2. Description mentions arXiv, Semantic Scholar, verified references

Read `commands/status.md` and confirm:
1. Contains logic to read LITERATURE.md frontmatter
2. Displays paper counts (total, confirmed, unconfirmed) and last search date
3. Shows "No searches yet" message when LITERATURE.md is absent
  </verify>
  <done>/math:help shows /math:search as active with proper description. /math:status includes a literature section showing paper counts from LITERATURE.md frontmatter or a "no searches yet" message.</done>
</task>

<task type="auto">
  <name>Task 2: Update /math:init to create LITERATURE.md during problem setup</name>
  <files>commands/init.md</files>
  <action>
Read the current `commands/init.md`. Update the problem directory creation logic to include LITERATURE.md.

**What to change:**

When `/math:init` creates a new problem directory (`.math/problems/{slug}/`), it currently creates files like PROBLEM.md, NOTATION.md, STATE.md, DASHBOARD.md, and JOURNAL.md from templates.

Add LITERATURE.md to the list of files created during init:
1. Find the section where init creates files in the problem directory (it reads templates and writes populated versions)
2. Add: Create `.math/problems/{slug}/LITERATURE.md` from `templates/LITERATURE.md`, populating:
   - `problem: "{slug}"` in frontmatter
   - `# Literature: {Problem Title}` as the heading (use slug as placeholder if title not yet known; the search agent will update it)
3. This should be alongside the existing JOURNAL.md, DASHBOARD.md, etc. creation

**Also update for the Phase 1 migration case:**
If init handles Phase 1 migration (upgrading from flat `.math/` to `.math/problems/{slug}/`), ensure LITERATURE.md is created in the new problem directory structure.

**Also update for the "add problem" case:**
If init is adding a new problem to an existing project, ensure LITERATURE.md is created in the new problem's directory.

**Do NOT change the overall init flow or any other file creation logic -- only add LITERATURE.md alongside existing file creation.**
  </action>
  <verify>
Read `commands/init.md` and confirm:
1. LITERATURE.md is listed among files created in a new problem directory
2. Template path `templates/LITERATURE.md` is referenced
3. Problem slug is populated in the LITERATURE.md frontmatter
4. All three init cases (fresh, migration, add problem) include LITERATURE.md creation
  </verify>
  <done>/math:init creates a LITERATURE.md from the template when setting up a new problem directory, in all three init cases (fresh project, Phase 1 migration, add problem).</done>
</task>

</tasks>

<verification>
1. `commands/help.md` lists /math:search as active (not coming soon)
2. `commands/status.md` reads LITERATURE.md and displays literature state
3. `commands/init.md` creates LITERATURE.md in new problem directories
4. No other commands are accidentally modified
5. All three init cases (fresh, migration, add problem) include LITERATURE.md
</verification>

<success_criteria>
- User running /math:help sees /math:search as an available, active command
- User running /math:status sees literature search results (or "no searches yet" prompt)
- User running /math:init gets a LITERATURE.md created alongside other problem files
- All changes are additive -- existing command functionality is preserved
</success_criteria>

<output>
After completion, create `.planning/phases/03-literature-search-agent/03-03-SUMMARY.md`
</output>
